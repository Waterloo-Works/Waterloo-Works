import Link from "next/link";
import Image from "next/image";
import GridOverlay from "@/components/ui/GridOverlay";
import { createClient } from "@/utils/supabase/server";
import { redirect } from "next/navigation";
import Footer from "@/components/Footer";
import HeaderLanding from "@/components/HeaderLanding";

export default async function Home() {
  const supabase = await createClient();
  const {
    data: { user },
  } = await supabase.auth.getUser();

  if (user) redirect("/explore");

  return (
    <div className="dark min-h-screen bg-black">

      <main>
      <HeaderLanding />
        {/* Hero: layered background (image + gradient) with centered content */}
        <section className="relative min-h-screen overflow-hidden">
          {/* Layer 1: Background image */}
          <Image
            src="/hero.png"
            alt="Waterloo goose illustration background"
            fill
            priority
            className="absolute inset-0 z-0 object-cover opacity-60"
          />
          {/* Layer 2: Gradient overlay (mid → dark) */}
          <div className="absolute inset-0 z-0 bg-gradient-to-b from-slate-900/50 via-slate-900/70 to-black/90" />

          {/* Layer 2.5: Top lightening wash to lift contrast near the header */}
          <div className="pointer-events-none absolute inset-x-0 top-0 h-40 md:h-48 z-10 bg-gradient-to-b from-white/30 via-white/10 to-transparent" />

          {/* Pendulum shimmer (loops) under grid; pivot at top for stronger bottom motion */}
          <div className="absolute inset-0 z-[12] pointer-events-none overflow-hidden">
            <div className="ww-pendulum ww-pendulum--force ww-pendulum--flip" style={{ ['--pendulum-duration' as any]: '9s', opacity: 0.45 }} />
            <div className="ww-pendulum ww-pendulum--force ww-pendulum--flip" style={{ ['--pendulum-duration' as any]: '13s', opacity: 0.25, ['--pendulum-from' as any]: '-12deg', ['--pendulum-to' as any]: '12deg' }} />
          </div>

          {/* Decorative side rails only, to frame content */}
          <GridOverlay
            className="z-20"
            fullHeight
            variant="sides"
            showTopTicks
            showBottomTicks
            showNodes
            showBottomNodes
            style={{ ['--ticks-top-offset' as any]: '66px', ['--hairline-top' as any]: '64px', ['--hairline-bottom' as any]: '8px' }}
          />

          {/* Layer 3: Content */}
          <div className="relative z-30 mx-auto flex min-h-svh max-w-4xl flex-col items-center justify-center px-4 md:px-6 text-center">
            <h2 className="font-header text-[2.25rem] md:text-h2 tracking-tight-04 leading-heading mb-3 text-white">
            we help our friends get hired &gt;:)
            </h2>

            {/* Single CTA pill — responsive sizes, no card behind */}
            <div className="w-full flex items-center justify-center mt-8 md:mt-10">
              <Link
                href="/explore"
                className="inline-flex items-center gap-2 md:gap-3 rounded-full bg-primary text-primary-foreground px-5 py-2 text-sm shadow hover:bg-primary/90 md:px-8 md:py-4 md:text-lg transition-all"
              >
                <span>Get Started</span>
                <svg
                  width="20"
                  height="24"
                  viewBox="0 0 78 93"
                  fill="none"
                  className="md:w-6 md:h-7 rotate-90"
                >
                  <path
                    fillRule="evenodd"
                    clipRule="evenodd"
                    d="M70.3849 49.2577C71.0433 48.9158 71.4391 48.1661 71.5201 47.4001C71.5701 46.9701 71.5101 46.59 71.3801 46.2C71.4872 44.9885 71.6283 43.7905 71.7698 42.5892C71.8 42.333 71.8302 42.0767 71.86 41.82C72.29 37.99 72.7201 34.1601 73.1701 30.3401C73.6101 26.6201 74.2501 22.94 74.9001 19.26C75.2701 17.18 75.62 15.09 75.94 13C76.21 11.21 76.4301 9.42004 76.6401 7.63004C76.7601 6.59004 76.8901 5.54003 77.0201 4.50003C77.0413 4.3322 77.0672 4.16118 77.0935 3.98831C77.2283 3.1003 77.3705 2.16359 76.9101 1.36002C76.4301 0.510019 75.4101 0.230029 74.5001 0.370029C74.0924 0.431792 73.6924 0.531703 73.2906 0.632064C73.0419 0.694196 72.7925 0.7565 72.5401 0.810031C72.1887 0.879151 71.8341 0.942465 71.4785 1.00594C70.5993 1.16288 69.7144 1.32084 68.86 1.57004C67.39 2.01004 65.9501 2.50004 64.5001 3.01004C64.546 2.99857 64.5886 2.9838 64.6298 2.96951C64.6604 2.9589 64.6902 2.94856 64.72 2.94004C64.0068 3.18665 63.3026 3.45993 62.5983 3.73322C62.246 3.86991 61.8935 4.00669 61.5401 4.14005C57.9601 5.50005 54.4 6.92005 50.86 8.39005C50.0301 8.73501 49.2027 9.08496 48.3753 9.43492C47.5479 9.78487 46.72 10.1351 45.8901 10.48C45.573 10.6116 45.2559 10.7477 44.9381 10.8841C44.3136 11.1521 43.6863 11.4214 43.0501 11.66L43.0473 11.6611C42.1482 12.0007 41.2491 12.3404 40.36 12.68C40.095 12.7645 39.8308 12.8507 39.5667 12.9368C38.9243 13.1463 38.2819 13.3558 37.6301 13.54C37.33 13.6251 37.0295 13.7089 36.729 13.7927C35.6177 14.1024 34.5062 14.4122 33.4201 14.79C32.3101 15.17 31.2101 15.58 30.1601 16.11C29.8905 16.2448 29.6184 16.3821 29.3463 16.5194L29.345 16.5201C29.0725 16.6576 28.8001 16.795 28.5301 16.93C27.7601 17.33 26.9701 17.8 26.3101 18.37H26.3001L26.2901 18.38C26.1301 18.47 25.98 18.57 25.84 18.7C25.38 19.12 25.2201 19.85 25.3801 20.43C25.5301 20.97 25.9201 21.38 26.4201 21.61C26.5779 21.6843 26.7528 21.7327 26.9211 21.7792L26.96 21.79C27.3757 21.9129 27.7928 22.0306 28.2097 22.1482C28.9461 22.3561 29.6822 22.5638 30.4101 22.8C31.0201 23.04 31.62 23.29 32.21 23.56C32.4099 23.65 32.6088 23.7444 32.8076 23.8388C33.2054 24.0277 33.6034 24.2167 34.0101 24.37C35.2701 24.84 36.52 25.27 37.82 25.61C38.18 25.705 38.5425 25.8 38.905 25.895C39.2675 25.99 39.63 26.085 39.99 26.18C40.0401 26.1967 40.0933 26.2103 40.1479 26.2243C40.1914 26.2354 40.2358 26.2467 40.2801 26.26C39.0901 27.11 37.9201 27.98 36.8101 28.93C34.2801 31.1 31.7901 33.33 29.4101 35.67C26.6601 38.37 23.92 41.08 21.34 43.94C21.1138 44.1906 20.8873 44.4411 20.6607 44.6917C18.2737 47.3322 15.8768 49.9836 13.6301 52.76C13.4385 52.9952 13.2461 53.2286 13.054 53.4616C12.5846 54.0311 12.1172 54.5981 11.6701 55.18C11.0001 56.07 10.3301 56.96 9.65008 57.85C9.28442 58.3282 8.9435 58.8162 8.60295 59.3038C8.45921 59.5095 8.31554 59.7152 8.1701 59.92C8.06299 60.0733 7.95543 60.2262 7.84799 60.3789C7.44388 60.9533 7.04139 61.5254 6.6701 62.11C6.50232 62.3707 6.33274 62.6287 6.16351 62.8861C5.76792 63.4879 5.37427 64.0867 5.01007 64.7101C4.48007 65.6201 3.9501 66.52 3.4201 67.42L3.22552 67.7502C2.78888 68.4906 2.35044 69.234 1.95001 70C1.70001 70.12 1.48011 70.29 1.30011 70.5201C0.840107 71.11 0.819999 71.93 1.19 72.54C1.24 72.85 1.37 73.1501 1.57 73.4001C1.65946 73.5126 1.76307 73.6151 1.87724 73.705C1.81479 74.277 1.93034 74.8778 2.03671 75.4309L2.05 75.5C2.13 75.91 2.21001 76.31 2.31001 76.71L2.3118 76.717C2.4012 77.0647 2.49058 77.4123 2.58991 77.75C2.77991 78.36 3.01991 78.86 3.58991 79.2C3.59492 79.205 3.59993 79.2075 3.60493 79.21C3.60994 79.2125 3.61495 79.215 3.61994 79.22C3.74994 79.37 3.9 79.51 4.05 79.65C4.46 80.03 4.86999 80.4 5.28999 80.77C5.73999 81.18 6.20992 81.55 6.71992 81.88C6.99981 82.0599 7.28859 82.231 7.57738 82.402C7.72194 82.4876 7.86651 82.5732 8.00996 82.66C8.16872 82.756 8.32613 82.8574 8.4842 82.9593C8.75421 83.1333 9.02618 83.3087 9.31001 83.46L9.31158 83.4609C9.71105 83.6706 10.1105 83.8803 10.52 84.08C10.789 84.2167 11.0471 84.3661 11.3044 84.5151C11.6496 84.7149 11.9932 84.9139 12.3599 85.08C12.6957 85.2283 13.0334 85.3708 13.3713 85.5135L13.3723 85.5139C13.809 85.6983 14.2461 85.8828 14.68 86.08C14.9036 86.1804 15.1272 86.284 15.3513 86.3878L15.3525 86.3884C15.9097 86.6466 16.4697 86.9062 17.04 87.12C17.1092 87.1452 17.1784 87.1706 17.2477 87.196C17.6186 87.3323 17.9908 87.4689 18.3699 87.57C18.4787 87.6011 18.5859 87.6291 18.6928 87.6571C18.8611 87.7011 19.0287 87.745 19.1999 87.8C19.5899 87.95 19.9699 88.1 20.3499 88.28C21.0325 88.6336 21.6861 89.0353 22.3392 89.4368C23.0161 89.8529 23.6925 90.2686 24.4 90.63L24.4789 90.6704C24.8837 90.8778 25.2975 91.0898 25.7199 91.24C26.1899 91.41 26.67 91.49 27.17 91.56C27.6697 91.63 28.1594 91.7199 28.6491 91.8098C28.9691 91.8699 29.2799 91.95 29.5899 92.04C29.7652 92.1066 29.9355 92.183 30.1056 92.2594C30.4209 92.4008 30.7357 92.5421 31.0799 92.62C31.3399 92.68 31.61 92.73 31.89 92.71C32.07 92.71 32.24 92.69 32.41 92.64C32.93 92.48 33.35 92.15 33.64 91.69C33.9872 91.1205 33.9389 90.4064 33.6024 89.8624C33.615 89.8513 33.6275 89.8404 33.64 89.83C33.9 89.58 34.0799 89.32 34.1899 88.96C34.2899 88.66 34.2899 88.35 34.2099 88.06C34.2199 87.9703 34.2398 87.8807 34.2597 87.7911L34.26 87.79C34.27 87.735 34.2825 87.6825 34.295 87.63C34.3074 87.5775 34.3199 87.525 34.3299 87.47V87.45L34.3626 87.29C34.5418 86.4123 34.7226 85.5267 34.93 84.65C35.1263 83.8089 35.3924 83.0027 35.6631 82.1824C35.682 82.125 35.701 82.0676 35.7199 82.01C36.0049 81.16 36.2649 80.305 36.5249 79.45C36.7849 78.595 37.0449 77.74 37.3299 76.89C37.5999 76.18 37.91 75.49 38.25 74.8C38.25 74.7938 38.2538 74.7876 38.2591 74.7791C38.2623 74.7738 38.2662 74.7676 38.27 74.76C38.28 74.73 38.2999 74.69 38.3199 74.65C38.316 74.6617 38.312 74.6739 38.3075 74.6855C38.2983 74.7037 38.2892 74.7218 38.28 74.74C38.2921 74.7218 38.3005 74.7037 38.3075 74.6855C38.403 74.4965 38.499 74.3075 38.5952 74.1182C39.0442 73.2345 39.495 72.3471 39.9 71.44C40.1131 70.9774 40.3181 70.5107 40.5232 70.0436C40.7703 69.4808 41.0177 68.9174 41.28 68.36C41.622 67.712 42.0072 67.0964 42.3924 66.4808C42.6492 66.0704 42.906 65.66 43.15 65.24C43.3865 64.8388 43.6016 64.4268 43.8164 64.0155C44.1102 63.4529 44.4034 62.8914 44.75 62.36C44.78 62.32 44.81 62.28 44.8499 62.24C45.0158 62.0638 45.1837 61.8902 45.3514 61.7168C45.8311 61.2209 46.3103 60.7256 46.74 60.17C47.26 59.51 47.72 58.8 48.18 58.09C48.53 57.59 48.9099 57.1 49.3199 56.63C49.7299 56.165 50.1499 55.7075 50.5699 55.25C50.9899 54.7925 51.4099 54.335 51.8199 53.87C51.83 53.8599 51.85 53.8399 51.86 53.82C51.87 53.82 51.87 53.81 51.87 53.81C51.87 53.8 51.88 53.8 51.88 53.8H51.87C51.88 53.8 51.89 53.79 51.89 53.79C52.145 53.485 52.385 53.1725 52.6249 52.86C52.8649 52.5475 53.1049 52.235 53.36 51.93C53.56 51.6966 53.7778 51.481 53.9956 51.2654C54.1044 51.1577 54.2133 51.05 54.3199 50.94C54.7299 50.51 55.13 50.07 55.51 49.62C55.726 49.3707 55.9236 49.1092 56.1214 48.8473C56.2808 48.6364 56.4404 48.4252 56.61 48.22C56.635 48.1949 56.6595 48.1698 56.6837 48.1449C56.7257 48.1019 56.7672 48.0594 56.8106 48.0181C57.6438 47.2849 58.4189 46.4848 59.0899 45.59C59.3699 45.22 59.6599 44.86 59.9599 44.5C59.9799 44.475 60.0024 44.45 60.0249 44.425C60.0474 44.4 60.0699 44.375 60.0899 44.35C60.2899 44.11 60.48 43.87 60.67 43.62L60.6705 43.6209C60.7403 43.7706 60.8102 43.9203 60.89 44.06C61.1 44.44 61.37 44.78 61.65 45.12C61.89 45.41 62.1 45.7 62.31 46C62.5174 46.3161 62.7139 46.6431 62.9109 46.9706C63.474 47.907 64.0402 48.8488 64.87 49.56C65.123 49.7768 65.3946 49.9643 65.6656 50.1515C65.9196 50.3267 66.173 50.5017 66.41 50.7C66.444 50.7318 66.478 50.7638 66.5122 50.7959C66.7788 51.0467 67.0508 51.3026 67.37 51.48C68.33 52.03 69.4799 51.81 70.0799 50.85C70.3399 50.42 70.37 49.91 70.38 49.42C70.3818 49.3658 70.3835 49.3117 70.3849 49.2577Z"
                    fill="currentColor"
                  />
                </svg>
              </Link>
            </div>
          </div>
        </section>

       
      </main>
      <Footer tone="dark" />
    </div>
  );
}
